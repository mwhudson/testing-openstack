metadata:
   name: Devstack exercises
   maintainer:
      - Clark Laughlin <clark.laughlin@linaro.org>
   format: "Lava-Test-Shell Test Definition 1.0"
   version: 1.0
   description: "Run Devstack exercises"
   os:
      - ubuntu
   devices:
      - arndale
      - midway
   environment:
      - lava-test-shell

install:
   steps:
      - ./install.sh
   deps:
      - git
      - nmap
      - bzr
      - vim
      - pm-utils
      - bridge-utils
      - openssh-server
run:
   steps:
      # run exercises 
      - set +e
      - export  SKIP_VOLUME_ATTACH_TEST=1
      - cd devstack
      - ./exercise.sh
      - cd ${TESTDIR}
      - set -e

parse:
   pattern: "^-+\\s+(?P<test_case_id>[a-z_]+:[a-z_]+)\\s(?P<result>PASS|FAIL|Skip).*"
   fixupdict:
      PASS: pass
      FAIL: fail
      Skip: skip

